<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cards</title>
    <link rel="stylesheet" href="../css/cards.css" />
    <link rel="stylesheet" href="../css/test.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Bangers&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
    />
  </head>
  <body>
    <header>
      <div>
        <a href="../index.html"
          ><img class="logo" src="../Images/Logo.png" alt="logo"
        /></a>
      </div>
      <div class="nav-search">
        <select class="select-search">
          <option>All</option>
          <option>All Categories</option>
        </select>
        <input type="text" placeholder="Search" class="search-input" />
        <div class="search-icon">
          <span class="material-symbols-outlined">search</span>
        </div>
      </div>
    </header>

    <nav class="dashboard">
      <ul>
        <li>
          <a class="miniatures" href="../pages/miniatures.html">Miniatures</a>
        </li>
        <li class="divider">|</li>
        <li><a class="stamps" href="pages/stamps.html">Stamps</a></li>
        <li class="divider">|</li>
        <li><a class="coins" href="pages/coins.html">Coins</a></li>
        <li class="divider">|</li>
        <li><a class="comics" href="pages/comics.html">Comics</a></li>
        <li class="divider">|</li>
        <li><a class="cards" href="pages/cards.html">Cards</a></li>
        <li class="divider">|</li>
        <li><a class="events" href="../pages/events.html">Events</a></li>
        <li class="divider">|</li>
        <li>
          <a class="collections" href="../pages/MyCollections.html"
            >My Collections</a
          >
        </li>
        <li class="divider">|</li>
        <li class="more">
          <span class="menu hamburger material-symbols-outlined">menu</span>
          More
        </li>
      </ul>
    </nav>

    <div class="more-categories" id="more-categories">
      <ul>
        <li><a href="category1.html">Category 1</a></li>
        <li><a href="category2.html">Category 2</a></li>
        <li><a href="category3.html">Category 3</a></li>
        <li><a href="category4.html">Category 4</a></li>
      </ul>
    </div>

    <div class="more-categories" id="more-categories">
      <ul>
        <li><a href="category1.html">Category 1</a></li>
        <li><a href="category2.html">Category 2</a></li>
        <li><a href="category3.html">Category 3</a></li>
        <li><a href="category4.html">Category 4</a></li>
      </ul>
    </div>

    <section class="filters">
      <div>
        <select id="category-select" class="category-dropdown">
          <option value="all" disabled selected>Category</option>
          <option value="all">All</option>
          <option value="pokemon">Pokemon</option>
          <option value="digimon">Digimon</option>
          <option value="invisimals">Invizimals</option>
          <option value="yugioh">Yugioh</option>
          <option value="bankai">Bankai</option>
        </select>
      </div>
      <div>
        <select id="subcategory-select" class="category-dropdown">
          <option value="all" disabled selected>Subcategory</option>
        </select>
      </div>
      <div class="checkbox-container" id="checkbox-container">
        <!-- Checkboxes will be dynamically added here -->
      </div>
    </section>
    <hr class="filters-hr" />

    <section class="collection_container">
      <div class="collection_box_primary">
        <div class="collection_image">
          <img
            src="../Images/cards/pokemon/Mew-cbr11.jpg"
            alt="Could not find image"
            style="max-width: 100%; max-height: 100%"
          />
        </div>
        <div class="collection_text">
          <a href="#mew.html"
            ><h1>Mew</h1>
            <h1>Normal Edition</h1></a
          >
        </div>
        <div class="icon-container">
          <a href="#favorite"
            ><img src="../Images/icons/favorite.png" alt="Favorite Icon"
          /></a>
          <a href="#search"
            ><img src="../Images/icons/search.png" alt="Search Icon"
          /></a>
          <a href="#photos"
            ><img src="../Images/icons/photos.png" alt="Photos Icon"
          /></a>
          <a href="#more"
            ><img src="../Images/icons/more.png" alt="More Icon"
          /></a>
        </div>
      </div>

      <div class="collection_box_primary">
        <div class="collection_image">
          <img
            src="../Images/cards/pokemon/charizardVShiny.png"
            alt="Could not find image"
            style="max-width: 100%; max-height: 100%"
          />
        </div>
        <div class="collection_text">
          <a href="../pages/charizard_card.html"
            ><h1>Charizard V Shiny</h1>
            <h1>Normal Edition</h1></a
          >
        </div>
        <div class="icon-container">
          <a href="#favorite"
            ><img src="../Images/icons/favorite.png" alt="Favorite Icon"
          /></a>
          <a href="#search"
            ><img src="../Images/icons/search.png" alt="Search Icon"
          /></a>
          <a href="#photos"
            ><img src="../Images/icons/photos.png" alt="Photos Icon"
          /></a>
          <a href="#more"
            ><img src="../Images/icons/more.png" alt="More Icon"
          /></a>
        </div>
      </div>
    </section>
    <script>
      const subcategoryOptions = {
        pokemon: ["All", "Pikachu", "Charizard", "Bulbasaur", "Mew"],
        digimon: ["Agumon", "Gabumon", "Patamon"],
        invisimals: ["Tiger Shark", "Fire Fox", "Shadow"],
        yugioh: ["Blue-Eyes White Dragon", "Dark Magician", "Exodia"],
        bankai: ["Ichigo", "Rukia", "Renji"],
        all: [
          "All",
          "Pikachu",
          "Charizard",
          "Bulbasaur",
          "Mew",
          "Agumon",
          "Gabumon",
          "Patamon",
          "Tiger Shark",
          "Fire Fox",
          "Shadow",
          "Blue-Eyes White Dragon",
          "Dark Magician",
          "Exodia",
          "Ichigo",
          "Rukia",
          "Renji",
        ],
      };

      const categoryCheckboxes = {
        pokemon: ["EX", "Shiny", "GX", "V", "VStar", "Holo", "Fossil"],
        digimon: ["Rookie", "Champion", "Ultimate", "Mega"],
        invisimals: ["Common", "Rare", "Legendary"],
        yugioh: ["Fusion", "Synchro", "XYZ", "Pendulum"],
        bankai: ["Shikai", "Bankai", "Hollow"],
      };

      function updateCardsVisibility() {
        const category = document.getElementById("category-select").value;
        const subcategory = document.getElementById("subcategory-select").value;
        const selectedCheckboxes = Array.from(
          document.querySelectorAll(".styled-checkbox:checked")
        ).map((checkbox) => checkbox.nextElementSibling.textContent);

        const showFavoritesOnly =
          document.getElementById("favorite-filter").checked;

        const cards = document.querySelectorAll(".collection_box_primary");

        cards.forEach((card) => {
          const cardName = card
            .querySelector(".collection_text h1")
            .textContent.toLowerCase();
          const isFavorite = card
            .querySelector("img[alt='Favorite Icon']")
            .src.includes("favorite2.png");

          const cardCategory =
            cardName.includes("mew") || cardName.includes("charizard")
              ? "pokemon"
              : "";
          const cardSubcategory = cardName.includes("mew")
            ? "mew"
            : cardName.includes("charizard")
            ? "charizard"
            : "";

          const excludedCheckboxes = cardName.includes("mew")
            ? ["Shiny", "V", "EX", "GX", "VStar", "Holo", "Fossil"]
            : cardName.includes("charizard")
            ? ["EX", "GX", "VStar", "Holo", "Fossil"]
            : [];

          const shouldShow =
            (!showFavoritesOnly || isFavorite) &&
            (category === "all" || category === cardCategory) &&
            (subcategory === "all" || subcategory === cardSubcategory) &&
            !selectedCheckboxes.some((checkbox) =>
              excludedCheckboxes.includes(checkbox)
            );

          card.style.display = shouldShow ? "block" : "none";
        });
      }

      function populateSubcategoriesAndCheckboxes() {
        const category = document.getElementById("category-select").value;
        const subcategorySelect = document.getElementById("subcategory-select");
        const checkboxContainer = document.getElementById("checkbox-container");

        subcategorySelect.innerHTML =
          '<option value="all" disabled selected>Subcategory</option>';
        if (subcategoryOptions[category]) {
          subcategoryOptions[category].forEach((subcategory) => {
            const option = document.createElement("option");
            option.value = subcategory.toLowerCase();
            option.textContent = subcategory;
            subcategorySelect.appendChild(option);
          });
        }

        checkboxContainer.innerHTML = `
          <label>
            <input type="checkbox" id="favorite-filter" class="styled-checkbox" />
            <h2>Favorites</h2>
          </label>
        `;

        if (categoryCheckboxes[category]) {
          categoryCheckboxes[category].forEach((checkboxLabel) => {
            const label = document.createElement("label");
            label.innerHTML = `
              <input type="checkbox" class="styled-checkbox" />
              <h2>${checkboxLabel}</h2>
            `;
            checkboxContainer.appendChild(label);
          });
        }

        updateCardsVisibility();
      }

      document
        .getElementById("category-select")
        .addEventListener("change", populateSubcategoriesAndCheckboxes);
      document
        .getElementById("subcategory-select")
        .addEventListener("change", updateCardsVisibility);
      document
        .getElementById("checkbox-container")
        .addEventListener("change", updateCardsVisibility);
      document.querySelector(".more").addEventListener("click", () => {
        const dropdown = document.getElementById("more-categories");
        dropdown.style.display =
          dropdown.style.display === "block" ? "none" : "block";
      });

      // Add event listeners to toggle favorite button texture
      document
        .querySelectorAll(".icon-container img[alt='Favorite Icon']")
        .forEach((favoriteIcon) => {
          favoriteIcon.addEventListener("click", () => {
            const currentSrc = favoriteIcon.src;
            favoriteIcon.src = currentSrc.includes("favorite2.png")
              ? "../Images/icons/favorite.png"
              : "../Images/icons/favorite2.png";

            updateCardsVisibility();
          });
        });
    </script>
  </body>
</html>
